window.__require=function t(e,o,n){function r(i,s){if(!o[i]){if(!e[i]){var c=i.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+i+"'")}i=c}var u=o[i]={exports:{}};e[i][0].call(u.exports,function(t){return r(e[i][1][t]||t)},u,u.exports,t,e,o,n)}return o[i].exports}for(var a="function"==typeof __require&&__require,i=0;i<n.length;i++)r(n[i]);return r}({Audio:[function(t,e,o){"use strict";cc._RF.push(e,"cef75s2kfNOkL9khvclCnBd","Audio"),Object.defineProperty(o,"__esModule",{value:!0}),o.audio=void 0;var n=t("./FreeBetSettingData"),r=function(){function t(){this.effectVolume=.6,this.musicVolume=.4,this.musicToken=null,cc.audioEngine.setMusicVolume(this.musicVolume),cc.audioEngine.setEffectsVolume(this.effectVolume)}return t.prototype.playMusic=function(t){n.settings.music&&(this.musicToken=cc.audioEngine.play(t,!0,this.musicVolume))},t.prototype.stopMusic=function(){null!==this.musicToken&&(cc.audioEngine.stop(this.musicToken),this.musicToken=null)},t.prototype.playEffect=function(t){n.settings.sound&&cc.audioEngine.play(t,!1,this.effectVolume)},t}();o.default=r,o.audio=new r,cc._RF.pop()},{"./FreeBetSettingData":"FreeBetSettingData"}],Balance:[function(t,e,o){"use strict";cc._RF.push(e,"82dd4cp9ghLG6McaphVNdF3","Balance");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./library/CocosUtils"),i=t("./library/FreeBetSettingData"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.init=function(){this.root=a.default.tree(this.node,{})},e.prototype.onLoad=function(){this.init()},e.prototype.start=function(){},e.prototype.setMoney=function(t){this.root["#point"].label.string=t+""},e.prototype.updateMoney=function(){this.setMoney(i.freeBetSetting.balance)},e=r([c],e)}(cc.Component));o.default=l,cc._RF.pop()},{"./library/CocosUtils":"CocosUtils","./library/FreeBetSettingData":"FreeBetSettingData"}],Bet:[function(t,e,o){"use strict";cc._RF.push(e,"04ce2mgfAJB8rzyg+2T9sfj","Bet");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./library/CocosUtils"),i=t("./library/FreeBetUtils"),s=t("./library/FreeBetSettingData"),c=t("./library/Audio"),l=cc._decorator,u=l.ccclass,f=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasInit=!1,e.betsZone=null,e.betHoverColor=new cc.Color(100,200,255),e.betNotHoverColor=new cc.Color(255,255,255),e.dragChip=null,e.betData=[0,0,0],e.chipValues=null,e.effectDuration={showBet:.25,hideBet:.25},e}return n(e,t),e.prototype.init=function(){this.hasInit||(this.root=a.default.tree(this.node,{}),this.hasInit=!0)},e.prototype.onLoad=function(){this.init()},e.prototype.start=function(){this.table=this.node.parent.getComponent("FreeBetTable")},e.prototype.reset=function(){this.betData=[0,0,0],this.cleanBetChips(0),this.cleanBetChips(1),this.cleanBetChips(2),this.updateBetValue(0),this.updateBetValue(1),this.updateBetValue(2),this.root.$bets.$0.clean.scaleX=this.root.$bets.$0.clean.scaleY=.1,this.root.$bets.$1.clean.scaleX=this.root.$bets.$1.clean.scaleY=.1,this.root.$bets.$2.clean.scaleX=this.root.$bets.$2.clean.scaleY=.1,this.root.$bets.$0.clean.active=!1,this.root.$bets.$1.clean.active=!1,this.root.$bets.$2.clean.active=!1,this.enableCleanButtonClick(!0)},e.prototype.registerChipEvent=function(t){var e=this;t?this.root.$chips.chips.children.forEach(function(t){t.on(cc.Node.EventType.TOUCH_END,e.onTouchEndEvent,e),t.on(cc.Node.EventType.TOUCH_CANCEL,e.onTouchCancelEvent,e),t.on(cc.Node.EventType.TOUCH_START,e.onTouchStart,e),t.on(cc.Node.EventType.TOUCH_MOVE,e.onTouchMove,e)}):this.root.$chips.chips.children.forEach(function(t){t.off(cc.Node.EventType.TOUCH_END,e.onTouchEndEvent,e),t.off(cc.Node.EventType.TOUCH_CANCEL,e.onTouchCancelEvent,e),t.off(cc.Node.EventType.TOUCH_START,e.onTouchStart,e),t.off(cc.Node.EventType.TOUCH_MOVE,e.onTouchMove,e)})},e.prototype.getBetZone=function(){if(null===this.betsZone){var t=this.root.$bets[0],e=t.convertToWorldSpaceAR(cc.v2(0,0)),o=this.root.$bets[1],n=o.convertToWorldSpaceAR(cc.v2(0,0)),r=this.root.$bets[2],a=r.convertToWorldSpaceAR(cc.v2(0,0));this.betsZone=[{startX:e.x-t.width/2,startY:e.y-t.height/2,endX:e.x+t.width/2,endY:e.y+t.height/2},{startX:n.x-o.width/2,startY:n.y-o.height/2,endX:n.x+o.width/2,endY:n.y+o.height/2},{startX:a.x-r.width/2,startY:a.y-r.height/2,endX:a.x+r.width/2,endY:a.y+r.height/2}]}return this.betsZone},e.prototype.getNewChipNode=function(t){var e=null;if(this.root.$chips.chips.children.forEach(function(o){o.name===t+""&&(e=o)}),null===e)return null;var o=cc.instantiate(e);return o.removeComponent(cc.Button),o.x=o.y=0,o},e.prototype.getChipValues=function(){var t=this;return null===this.chipValues&&(this.chipValues=[],this.root.$chips.chips.children.forEach(function(e){t.chipValues.push(parseInt(e.name))}),this.chipValues.sort(function(t,e){return t-e})),this.chipValues},e.prototype.onTouchStart=function(t){c.audio.playEffect(s.voice.grabChip);var e=this.table.node.convertToNodeSpaceAR(t.getLocation()),o=cc.instantiate(t.target);o.removeComponent(cc.Button),o.x=e.x,o.y=e.y,this.table.addEffectNode(o),t.target.opacity=0,this.dragChip=o},e.prototype.onTouchMove=function(t){var e=this.table.node.convertToNodeSpaceAR(t.getLocation());this.dragChip.x=e.x,this.dragChip.y=e.y,this.updateBetHoverStatus(t.getLocation())},e.prototype.updateBetHoverStatus=function(t){var e=this;void 0===t&&(t=null);var o=-1;return null===t?(this.root.$bets.$0.bg.color=this.betNotHoverColor,this.root.$bets.$1.bg.color=this.betNotHoverColor,this.root.$bets.$2.bg.color=this.betNotHoverColor):this.getBetZone().forEach(function(n,r){t.x>=n.startX&&t.x<=n.endX&&t.y>=n.startY&&t.y<=n.endY?(e.root.$bets["$"+r].bg.color=e.betHoverColor,o=r):e.root.$bets["$"+r].bg.color=e.betNotHoverColor}),o},e.prototype.onTouchCancelEvent=function(t){this.dragChip.destroy(),t.target.opacity=255,this.dragChip=null;var e=this.updateBetHoverStatus(t.getLocation());-1!==e&&this.addBet(e,parseInt(t.target.name)),this.updateBetHoverStatus(null),this.table.getButtonsScript().updateDealButtonStatus()},e.prototype.onTouchEndEvent=function(t){this.dragChip.destroy(),t.target.opacity=255,this.dragChip=null;var e=this.updateBetHoverStatus(t.getLocation());-1!==e&&this.addBet(e,parseInt(t.target.name)),this.updateBetHoverStatus(null),this.table.getButtonsScript().updateDealButtonStatus()},e.prototype.onBetCleanClick=function(t){if(!(t.target.getNumberOfRunningActions()>0)){c.audio.playEffect(s.voice.clickButton);var e=parseInt(t.target.parent.name);this.betData[e]=0,this.cleanBetChips(e),this.updateBetValue(e),this.effectingOfHideBetClean(e),this.table.getButtonsScript().updateDealButtonStatus()}},e.prototype.addBet=function(t,e){var o=this.betData[t],n=s.freeBetSetting.betUnit*s.freeBetSetting.maxBet,r=o+e;r>n&&(r=n),r!==o&&(c.audio.playEffect(s.voice.chip),this.betData[t]=r,this.updateBetStatus(t),0===o&&this.effectingOfShowBetClean(t))},e.prototype.addChipToBet=function(t,e){var o=this.root.$bets["$"+t].chips,n=6*o.children.length;return e.y=n,o.addChild(e),e},e.prototype.cleanBetChips=function(t){this.root.$bets["$"+t].chips.destroyAllChildren(),this.root.$bets["$"+t].chips.removeAllChildren(!0)},e.prototype.effectOfShowBet=function(t,e){var o=this;void 0===e&&(e=null),t.call(function(){o.node.active=!0,o.node.scaleX=o.node.scaleY=0,cc.tween(o.node).to(o.effectDuration.showBet,{scaleX:1,scaleY:1},i.getEaseObject(i.Easing.sineOut)).call(function(){o.node.scaleX=o.node.scaleY=1,o.registerChipEvent(!0)}).start()}),i.handleDelayCallback(t,i.DelayOption.SEAMLESS_PLUS_CUSTOM,this.effectDuration.showBet,.075,e)},e.prototype.effectOfHideBet=function(t,e){var o=this;void 0===e&&(e=null),t.call(function(){cc.tween(o.node).to(o.effectDuration.hideBet,{scaleX:0,scaleY:0},i.getEaseObject(i.Easing.sineOut)).call(function(){o.node.scaleX=o.node.scaleY=0,o.node.active=!1}).start()}),i.handleDelayCallback(t,i.DelayOption.SEAMLESS_PLUS_CUSTOM,this.effectDuration.hideBet,.075,e)},e.prototype.effectingOfShowBetClean=function(t){var e=this.root.$bets["$"+t].clean;e.getNumberOfRunningActions()>0&&e.stopAllActions(),1===e.scaleX&&!0===e.active||(e.active=!0,cc.tween(e).to(.2,{scaleX:1,scaleY:1},i.getEaseObject(i.Easing.backOut)).call(function(){e.scaleX=e.scaleY=1}).start())},e.prototype.effectingOfHideBetClean=function(t){var e=this.root.$bets["$"+t].clean;e.getNumberOfRunningActions()>0&&e.stopAllActions(),cc.tween(e).to(.2,{scaleX:.1,scaleY:.1},i.getEaseObject(i.Easing.sineOut)).call(function(){e.scaleX=e.scaleY=.1,e.active=!1}).start()},e.prototype.updateBetStatus=function(t){var e=null;this.cleanBetChips(t);for(var o=this.betData.slice(),n=this.getChipValues(),r=o[t],a=n.length-1;a>=0;a--)for(var s=n[a];r>=s;)e=this.addChipToBet(t,this.getNewChipNode(s)),r-=s;0!==r&&(e=this.addChipToBet(t,this.getNewChipNode(n[0]))),cc.tween(e).by(.125,{y:10},i.getEaseObject(i.Easing.sineOut)).by(.125,{y:-10},i.getEaseObject(i.Easing.sineIn)).start(),this.updateBetValue(t)},e.prototype.updateBetMax=function(){this.root.$bets.$0.$limit["#max"].label.string="Max:"+s.freeBetSetting.betUnit*s.freeBetSetting.maxBet,this.root.$bets.$1.$limit["#max"].label.string="Max:"+s.freeBetSetting.betUnit*s.freeBetSetting.maxBet,this.root.$bets.$2.$limit["#max"].label.string="Max:"+s.freeBetSetting.betUnit*s.freeBetSetting.maxBet},e.prototype.updateBetValue=function(t){0===this.betData[t]?this.root.$bets["$"+t]["#totalValue"].label.string="":this.root.$bets["$"+t]["#totalValue"].label.string=this.betData[t]+""},e.prototype.enableCleanButtonClick=function(t){this.root.$bets.$0["#clean"].button.interactable=t,this.root.$bets.$1["#clean"].button.interactable=t,this.root.$bets.$2["#clean"].button.interactable=t},e=r([u],e)}(cc.Component));o.default=f,cc._RF.pop()},{"./library/Audio":"Audio","./library/CocosUtils":"CocosUtils","./library/FreeBetSettingData":"FreeBetSettingData","./library/FreeBetUtils":"FreeBetUtils"}],Buttons:[function(t,e,o){"use strict";cc._RF.push(e,"e43fauREphCpZZwN2zBbgXn","Buttons");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.Button=void 0;var a,i=t("./library/CocosUtils"),s=t("./library/FreeBetUtils"),c=t("./library/FreeBetSettingData"),l=t("./FreeBetBJ"),u=t("./library/Audio"),f=cc._decorator,p=f.ccclass,d=f.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PayTable=null,e.Settings=null,e.payTable=null,e.settings=null,e.actionIndex=0,e}return n(e,t),e.prototype.init=function(){this.root=i.default.tree(this.node,{})},e.prototype.onLoad=function(){this.init()},e.prototype.start=function(){this.table=this.node.parent.getComponent("FreeBetTable")},e.prototype.onPayTableClick=function(t){var e=t.target;e.getNumberOfRunningActions()>0||(s.flashNode(e),u.audio.playEffect(c.voice.clickButton),null===this.payTable&&(this.payTable=cc.instantiate(this.PayTable),this.payTable.getComponent("PayTable").init()),this.table.node.addChild(this.payTable),this.payTable.getComponent("PayTable").show())},e.prototype.onSettingsClick=function(t){var e=t.target;e.getNumberOfRunningActions()>0||(s.flashNode(e),u.audio.playEffect(c.voice.clickButton),null===this.settings&&(this.settings=cc.instantiate(this.Settings),this.settings.getComponent("Settings").init()),this.table.node.addChild(this.settings),this.settings.getComponent("Settings").show())},e.prototype.onDealClick=function(t){var e=this,o=t.target;if(!(o.getNumberOfRunningActions()>0)){s.flashNode(o),u.audio.playEffect(c.voice.clickButton),this.enableButtonClick(a.BET_DEAL,!1),this.table.getBetScript().enableCleanButtonClick(!1),this.table.getBetScript().registerChipEvent(!1),this.table.clearEffectNodes();var n=0,r=this.table.getBetScript().betData.slice();r.forEach(function(t){n+=t}),l.freeBetBJ.getBalance().catch(function(t){i.default.error(t),e.table.gaming.showMessage(s.ClientErrorMessage.TOKEN_ERROR)}).then(function(t){t&&(i.default.log(t),c.freeBetSetting.balance=parseInt(t.available),e.table.getBalanceScript().updateMoney(),n>c.freeBetSetting.balance?(e.enableButtonClick(a.BET_DEAL,!0),e.table.getBetScript().enableCleanButtonClick(!0),e.table.getBetScript().registerChipEvent(!0),e.table.gaming.showNotice(s.ClientErrorMessage.INSUFFICIENT_BALANCE)):l.freeBetBJ.startNewGame(r).catch(function(t){i.default.error(t),e.table.gaming.showMessage(t)}).then(function(t){t&&(i.default.log(t),e.table.getEventScript().effectServerEvent(t),e.table.getBalanceScript().setMoney(c.freeBetSetting.balance-n))}))})}},e.prototype.onHitClick=function(t){var e=this,o=t.target;o.getNumberOfRunningActions()>0||(s.flashNode(o),u.audio.playEffect(c.voice.clickButton),this.disablePlayButtons(),l.freeBetBJ.hit(this.actionIndex).catch(function(t){i.default.error(t),e.table.gaming.showMessage(t)}).then(function(t){t&&(i.default.log(t),e.table.getEventScript().effectServerEvent(t))}))},e.prototype.onStandClick=function(t){var e=this,o=t.target;o.getNumberOfRunningActions()>0||(s.flashNode(o),u.audio.playEffect(c.voice.clickButton),this.disablePlayButtons(),l.freeBetBJ.stand(this.actionIndex).catch(function(t){i.default.error(t),e.table.gaming.showMessage(t)}).then(function(t){t&&(i.default.log(t),e.table.getEventScript().effectServerEvent(t))}))},e.prototype.onFreeDoubleClick=function(t){var e=this,o=t.target;o.getNumberOfRunningActions()>0||(s.flashNode(o),u.audio.playEffect(c.voice.clickButton),this.disablePlayButtons(),l.freeBetBJ.freeDouble(this.actionIndex).catch(function(t){i.default.error(t),e.table.gaming.showMessage(t)}).then(function(t){t&&(i.default.log(t),e.table.getEventScript().effectServerEvent(t))}))},e.prototype.onFreeSplitClick=function(t){var e=this,o=t.target;o.getNumberOfRunningActions()>0||(s.flashNode(o),u.audio.playEffect(c.voice.clickButton),this.disablePlayButtons(),l.freeBetBJ.freeSplit(this.actionIndex).catch(function(t){i.default.error(t),e.table.gaming.showMessage(t)}).then(function(t){t&&(i.default.log(t),e.table.getEventScript().effectServerEvent(t))}))},e.prototype.onDoubleClick=function(t){var e=this,o=t.target;if(!(o.getNumberOfRunningActions()>0)){s.flashNode(o),u.audio.playEffect(c.voice.clickButton);var n=this.getPlayButtonEnableStatus();this.disablePlayButtons();var r=this.table.getPlayerScript(),a=r.getPlayBet(r.data.focus.seat,r.data.focus.row).getComponent("PlayBet").data.bet;l.freeBetBJ.getBalance().catch(function(t){i.default.error(t),e.table.gaming.showMessage(s.ClientErrorMessage.TOKEN_ERROR)}).then(function(t){t&&(i.default.log(t),c.freeBetSetting.balance=parseInt(t.available),e.table.getBalanceScript().updateMoney(),a>c.freeBetSetting.balance?(e.enablePlayButtons(n),e.table.gaming.showNotice(s.ClientErrorMessage.INSUFFICIENT_BALANCE)):l.freeBetBJ.double(e.actionIndex).catch(function(t){i.default.error(t),e.table.gaming.showMessage(t)}).then(function(t){t&&(i.default.log(t),e.table.getEventScript().effectServerEvent(t),e.table.getBalanceScript().setMoney(c.freeBetSetting.balance-a))}))})}},e.prototype.onSplitClick=function(t){var e=this,o=t.target;if(!(o.getNumberOfRunningActions()>0)){s.flashNode(o),u.audio.playEffect(c.voice.clickButton);var n=this.getPlayButtonEnableStatus();this.disablePlayButtons();var r=this.table.getPlayerScript(),a=r.getPlayBet(r.data.focus.seat,r.data.focus.row).getComponent("PlayBet").data.bet;l.freeBetBJ.getBalance().catch(function(t){i.default.error(t),e.table.gaming.showMessage(s.ClientErrorMessage.TOKEN_ERROR)}).then(function(t){t&&(i.default.log(t),c.freeBetSetting.balance=parseInt(t.available),e.table.getBalanceScript().updateMoney(),a>c.freeBetSetting.balance?(e.enablePlayButtons(n),e.table.gaming.showNotice(s.ClientErrorMessage.INSUFFICIENT_BALANCE)):l.freeBetBJ.split(e.actionIndex).catch(function(t){i.default.error(t),e.table.gaming.showMessage(t)}).then(function(t){t&&(i.default.log(t),e.table.getEventScript().effectServerEvent(t),e.table.getBalanceScript().setMoney(c.freeBetSetting.balance-a))}))})}},e.prototype.onRebetButtonClick=function(t){var e=this,o=t.target;if(!(o.getNumberOfRunningActions()>0)){s.flashNode(o),u.audio.playEffect(c.voice.clickButton),this.enableEndButtons(!1);var n=0,r=this.table.getBetScript().betData.slice();r.forEach(function(t){n+=t}),l.freeBetBJ.getBalance().catch(function(t){i.default.error(t),e.table.gaming.showMessage(s.ClientErrorMessage.TOKEN_ERROR)}).then(function(t){t&&(i.default.log(t),c.freeBetSetting.balance=parseInt(t.available),e.table.getBalanceScript().updateMoney(),n>c.freeBetSetting.balance?(e.enableEndButtons(!0),e.table.gaming.showNotice(s.ClientErrorMessage.INSUFFICIENT_BALANCE)):(e.table.getPlayerScript().reset(),e.table.getDealerScript().reset(),l.freeBetBJ.startNewGame(r).catch(function(t){i.default.error(t),e.table.gaming.showMessage(t)}).then(function(t){t&&(i.default.log(t),e.table.getEventScript().effectServerEvent(t),e.table.getBalanceScript().setMoney(c.freeBetSetting.balance-n))})))})}},e.prototype.onCleanButtonClick=function(t){var e=this,o=t.target;if(!(o.getNumberOfRunningActions()>0)){s.flashNode(o),u.audio.playEffect(c.voice.clickButton),this.table.getBetScript().reset(),this.table.getPlayerScript().reset(),this.table.getDealerScript().reset(),this.enableEndButtons(!1);var n=cc.tween(this.table.node);this.table.getBetScript().effectOfShowBet(n,function(){e.showButton(a.END_REBET,!1),e.showButton(a.END_CLEAN,!1),e.showButton(a.BET_DEAL,!0),e.enableButtonClick(a.BET_DEAL,!1)}),n.start()}},e.prototype.getPlayButtonEnableStatus=function(){var t={};return this.root.play.children.forEach(function(e){e.active&&(t[e.name]=e.getComponent(cc.Button).interactable)}),t},e.prototype.enableButtonClick=function(t,e){var o=null;switch(t){case a.BET_DEAL:o=this.root.$bet[t];break;case a.END_CLEAN:case a.END_REBET:o=this.root.$end[t];break;case a.PLAY_DOUBLE:case a.PLAY_FREE_DOUBLE:case a.PLAY_FREE_SPLIT:case a.PLAY_HIT:case a.PLAY_SPLIT:case a.PLAY_STAND:o=this.root.$play[t]}o.getComponent(cc.Button).interactable=e;var n=o.getChildByName("bg"),r=n.getChildByName("label"),i=e?new cc.Color(255,255,255):new cc.Color(100,100,100);t!==a.PLAY_FREE_DOUBLE&&t!==a.PLAY_FREE_SPLIT||(e&&(i=new cc.Color(0,244,244)),n.getChildByName("label2").color=i);n.color=r.color=i},e.prototype.disablePlayButtons=function(){this.enableButtonClick(a.PLAY_SPLIT,!1),this.enableButtonClick(a.PLAY_DOUBLE,!1),this.enableButtonClick(a.PLAY_HIT,!1),this.enableButtonClick(a.PLAY_STAND,!1),this.enableButtonClick(a.PLAY_FREE_DOUBLE,!1),this.enableButtonClick(a.PLAY_FREE_SPLIT,!1)},e.prototype.hidePlayButtons=function(){this.root.$play[a.PLAY_SPLIT].active=!1,this.root.$play[a.PLAY_DOUBLE].active=!1,this.root.$play[a.PLAY_FREE_DOUBLE].active=!1,this.root.$play[a.PLAY_FREE_SPLIT].active=!1,this.root.$play[a.PLAY_HIT].active=!1,this.root.$play[a.PLAY_STAND].active=!1},e.prototype.enableEndButtons=function(t){this.enableButtonClick(a.END_REBET,t),this.enableButtonClick(a.END_CLEAN,t)},e.prototype.enablePlayButtons=function(t){var e=this;Object.keys(t).forEach(function(o){e.enableButtonClick(o,t[o])})},e.prototype.showButton=function(t,e){var o=null;switch(t){case a.BET_DEAL:o=this.root.$bet[t];break;case a.END_CLEAN:case a.END_REBET:o=this.root.$end[t];break;case a.PLAY_DOUBLE:case a.PLAY_FREE_DOUBLE:case a.PLAY_FREE_SPLIT:case a.PLAY_HIT:case a.PLAY_SPLIT:case a.PLAY_STAND:o=this.root.$play[t]}switch(o.active=e,t){case a.PLAY_DOUBLE:this.root.$play.freeDouble.active=!e;break;case a.PLAY_FREE_DOUBLE:this.root.$play.double.active=!e;break;case a.PLAY_FREE_SPLIT:this.root.$play.split.active=!e;break;case a.PLAY_SPLIT:this.root.$play.freeSplit.active=!e}},e.prototype.updateDealButtonStatus=function(){var t=!1;this.table.getBetScript().betData.forEach(function(e,o){e>=c.freeBetSetting.minBet*c.freeBetSetting.betUnit&&e<=c.freeBetSetting.maxBet*c.freeBetSetting.betUnit&&(t=!0)}),this.enableButtonClick(a.BET_DEAL,t)},r([d(cc.Prefab)],e.prototype,"PayTable",void 0),r([d(cc.Prefab)],e.prototype,"Settings",void 0),e=r([p],e)}(cc.Component);o.default=h,function(t){t.BET_DEAL="deal",t.PLAY_HIT="hit",t.PLAY_STAND="stand",t.PLAY_SPLIT="split",t.PLAY_DOUBLE="double",t.PLAY_FREE_SPLIT="freeSplit",t.PLAY_FREE_DOUBLE="freeDouble",t.END_REBET="rebet",t.END_CLEAN="clean"}(a=o.Button||(o.Button={})),cc._RF.pop()},{"./FreeBetBJ":"FreeBetBJ","./library/Audio":"Audio","./library/CocosUtils":"CocosUtils","./library/FreeBetSettingData":"FreeBetSettingData","./library/FreeBetUtils":"FreeBetUtils"}],CardsDetail:[function(t,e,o){"use strict";cc._RF.push(e,"812897ihNhJ0IDDFe6CgVB+","CardsDetail");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a,i=t("./library/CocosUtils"),s=t("./library/FreeBetUtils"),c=t("./library/Audio"),l=t("./library/FreeBetSettingData"),u=cc._decorator,f=u.ccclass,p=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasInit=!1,e.seat=-1,e.row=-1,e.status=a.HIDING,e.effectDuration={showCardsDetail:.25,hideCardsDetail:.25},e}return n(e,t),e.prototype.init=function(){this.hasInit||(this.root=i.default.tree(this.node,{}),this.hasInit=!0)},e.prototype.onLoad=function(){this.init()},e.prototype.start=function(){},e.prototype.setCards=function(){},e.prototype.showCardsDetail=function(t,e,o){var n=this.root.cards,r=this.root.cards.children;(t.forEach(function(t,e){r[e]?r[e].getComponent(cc.Sprite).spriteFrame=s.getCardSprite(t):n.addChild(s.getCardNode(t))}),r.forEach(function(e,o){e.active=o<t.length,e.x=30*o-240}),this.seat=e,this.row=o,this.status!==a.SHOWING)&&(this.node.getNumberOfRunningActions()>0&&this.node.stopAllActions(),this.status=a.SHOWING,this.node.scaleX=this.node.scaleY=.75,this.node.opacity=50,this.node.active=!0,cc.tween(this.node).to(this.effectDuration.showCardsDetail,{opacity:255,scaleX:1,scaleY:1},s.getEaseObject(s.Easing.backOut)).start(),c.audio.playEffect(l.voice.popup))},e.prototype.hideCardsDetail=function(){var t=this;this.status!==a.HIDING&&(this.node.getNumberOfRunningActions()>0&&this.node.stopAllActions(),this.status=a.HIDING,this.seat=this.row=-1,cc.tween(this.node).to(this.effectDuration.hideCardsDetail,{opacity:50,scaleX:.75,scaleY:.75},s.getEaseObject(s.Easing.sineOut)).call(function(){t.node.active=!1}).start(),c.audio.playEffect(l.voice.popdown))},e.prototype.onCancelClick=function(){this.node.getNumberOfRunningActions()>0||this.hideCardsDetail()},e=r([f],e)}(cc.Component));o.default=p,function(t){t[t.SHOWING=0]="SHOWING",t[t.HIDING=1]="HIDING"}(a||(a={})),cc._RF.pop()},{"./library/Audio":"Audio","./library/CocosUtils":"CocosUtils","./library/FreeBetSettingData":"FreeBetSettingData","./library/FreeBetUtils":"FreeBetUtils"}],CocosUtils:[function(t,e,o){"use strict";cc._RF.push(e,"710723aBLdHeYPN7w9T5QZ7","CocosUtils"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=(n.ccclass,n.property,function(){function t(){}return t.tree=function(t,e){var o=this;return t.children.forEach(function(t){e[t.name]=t;var n=t.getComponent(cc.Label);n&&(e["#"+t.name]={},e["#"+t.name].label=n);var r=t.getComponent(cc.Sprite);r&&(e["#"+t.name]||(e["#"+t.name]={}),e["#"+t.name].sprite=r);var a=t.getComponent(cc.Layout);a&&(e["#"+t.name]||(e["#"+t.name]={}),e["#"+t.name].layout=a);var i=t.getComponent(cc.Button);i&&(e["#"+t.name]||(e["#"+t.name]={}),e["#"+t.name].button=i);var s=t.getComponent(cc.ProgressBar);s&&(e["#"+t.name]||(e["#"+t.name]={}),e["#"+t.name].progressBar=s);var c=t.getComponent(cc.EditBox);c&&(e["#"+t.name]||(e["#"+t.name]={}),e["#"+t.name].editBox=c),t.childrenCount>0&&(e["$"+t.name]={},o.tree(t,e["$"+t.name]))}),e},t.tree2=function(t,e){var o=this;e[t.name]=t;var n=t.getComponent(cc.Label);n&&(e["#"+t.name]={},e["#"+t.name].label=n);var r=t.getComponent(cc.Sprite);r&&(e["#"+t.name]||(e["#"+t.name]={}),e["#"+t.name].sprite=r);var a=t.getComponent(cc.Layout);return a&&(e["#"+t.name]||(e["#"+t.name]={}),e["#"+t.name].layout=a),t.childrenCount>0&&(e["$"+t.name]={},t.children.forEach(function(n){o.tree2(n,e["$"+t.name])})),e},t.log=function(t){this.debugMode&&console.log(t)},t.warn=function(t){this.debugMode&&console.warn(t)},t.error=function(t){this.debugMode&&console.error(t)},t.debugMode=!1,t}());o.default=r,cc._RF.pop()},{}],Dealer:[function(t,e,o){"use strict";cc._RF.push(e,"b5fca+ZNU1IG5KnkVlr2GXk","Dealer");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./library/CocosUtils"),i=t("./library/FreeBetUtils"),s=t("./library/FreeBetSettingData"),c=t("./library/Audio"),l=cc._decorator,u=l.ccclass,f=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dealerLevel=2,e.effectDuration={raise:.25,transferCard:.2,dealerSendCard:.2,turnCard:.125,showPoint:.2},e.data={cards:[],values:{soft:0,hard:0,blackjack:!1}},e.cardsPosition=null,e}return n(e,t),e.prototype.init=function(){this.root=a.default.tree(this.node,{})},e.prototype.onLoad=function(){this.init()},e.prototype.start=function(){this.table=this.node.parent.getComponent("FreeBetTable")},e.prototype.reset=function(){this.data.cards.length=0,this.data.values.soft=0,this.data.values.hard=0,this.data.values.blackjack=!1,this.root.cards.destroyAllChildren(),this.root.cards.y=390,this.root.value.y=390,this.root.$value["#point"].sprite.spriteFrame=null,this.root.$value.$point["#p"].label.string=""},e.prototype.effectOfCardsRaiseLevel=function(t,e){var o=this;void 0===e&&(e=null),t.call(function(){o.dealerLevel++;var t=o.root.cards.y+190,e=cc.tween(o.root.cards),n=o.root.value.y+190,r=cc.tween(o.root.value);e.to(o.effectDuration.raise,{y:t}).start(),r.to(o.effectDuration.raise,{y:n}).start()}),i.handleDelayCallback(t,i.DelayOption.SEAMLESS_PLUS_CUSTOM,this.effectDuration.raise,.075,e)},e.prototype.effectOfTransferCard=function(t,e){var o=this;void 0===e&&(e=null);var n=this.getData().cards.length,r=this.root.cards.children,a=this.getCardsPosition(n+1).slice(),s=0;n>=2&&n<=6&&(r.forEach(function(e,n){t.call(function(){cc.tween(e).to(o.effectDuration.transferCard,{x:a[n]}).start()})}),s=this.effectDuration.transferCard),i.handleDelayCallback(t,i.DelayOption.SEAMLESS_PLUS_CUSTOM,s,.075,e)},e.prototype.effectOfDealerSendCard=function(t,e){var o=this;void 0===e&&(e=null),t.call(function(){var t=o.table.root.sendCard,e=o.getData().cards.length,n=o.getCardsPosition(e+1),r=n[n.length-1],a=i.getXYUntilNode(t,o.table.node),l=i.getXYUntilNode(o.root.cards,o.table.node);l.x+=r;var u=cc.instantiate(t);u.active=!0,u.x=a.x,u.y=a.y,o.table.addEffectNode(u),c.audio.playEffect(s.voice.sendCard),cc.tween(u).to(o.effectDuration.dealerSendCard,{x:l.x,y:l.y}).start()}),i.handleDelayCallback(t,i.DelayOption.SEAMLESS,this.effectDuration.dealerSendCard,0,e)},e.prototype.effectOfTurnLastCard=function(t,e,o){var n=this;void 0===o&&(o=null),t.call(function(){var t=n.root.cards.children,o=t[t.length-1],r=cc.tween(o);c.audio.playEffect(s.voice.turnCard),r.to(n.effectDuration.turnCard,{y:15,eulerAngles:cc.v3(-10,90,-10)}).call(function(){n.setLastCardSprite(e),o.eulerAngles=cc.v3(10,270,10)}).to(n.effectDuration.turnCard,{y:0,eulerAngles:cc.v3(0,0,0)}).start()}),i.handleDelayCallback(t,i.DelayOption.SEAMLESS_PLUS_CUSTOM,2*this.effectDuration.turnCard,.075,o)},e.prototype.effectOfTurnFirstCard=function(t,e,o){var n=this;void 0===o&&(o=null),t.call(function(){var t=n.root.cards.children[0],o=cc.tween(t);c.audio.playEffect(s.voice.turnCard),o.to(n.effectDuration.turnCard,{y:15,eulerAngles:cc.v3(-10,90,-10)}).call(function(){n.setFirstCardSprite(e),t.eulerAngles=cc.v3(10,270,10)}).to(n.effectDuration.turnCard,{y:0,eulerAngles:cc.v3(0,0,0)}).start()}),i.handleDelayCallback(t,i.DelayOption.SEAMLESS_PLUS_CUSTOM,2*this.effectDuration.turnCard,.075,o)},e.prototype.effectOfShowPoint=function(t,e,o){var n=this,r=e.soft,a=e.hard,l=e.blackjack;void 0===o&&(o=null);var u=0,f=!(this.data.values.hard===a&&this.data.values.soft===r&&this.data.values.blackjack===l);f&&(u+=this.effectDuration.showPoint),t.call(function(){if(n.setPoint({soft:r,hard:a,blackjack:l}),f){var t=n.root.$value.point,e=cc.tween(t);t.scaleX=t.scaleY=0,e.call(function(){l&&c.audio.playEffect(s.voice.bj)}).to(n.effectDuration.showPoint,{scaleX:1,scaleY:1},i.getEaseObject(i.Easing.backOut)).start()}}),i.handleDelayCallback(t,i.DelayOption.SEAMLESS_PLUS_CUSTOM,u,.075,o)},e.prototype.addCardEffects=function(t,e,o){var n=this;this.effectOfTransferCard(t),this.effectOfDealerSendCard(t,function(){n.addCard(52),n.table.clearEffectNodes()}),this.effectOfTurnLastCard(t,e),this.effectOfShowPoint(t,o)},e.prototype.createDealerEffects=function(t){var e=this;this.addCard(52,0),this.addCard(52,0),this.effectOfDealerSendCard(t,function(){e.showDealerCard(0),e.table.clearEffectNodes()}),this.effectOfDealerSendCard(t,function(){e.showDealerCard(1),e.table.clearEffectNodes()})},e.prototype.showDealerCard=function(t){this.root.cards.children[t].opacity=255},e.prototype.turnBaseDealerEffects=function(t,e){this.effectOfTurnFirstCard(t,e)},e.prototype.turnSecondDealerEffects=function(t,e,o){this.effectOfTurnLastCard(t,e),this.effectOfShowPoint(t,o)},e.prototype.getData=function(){return this.data},e.prototype.getCardsPosition=function(t){return t>=7&&(t=7),null===this.cardsPosition&&(this.cardsPosition=[[],[-50],[-50,50],[-50,-20,10],[-50,-20,10,40],[-50,-20,10,40,70],[-50,-20,10,40,70,100],[-50,-20,10,40,70,100,130]]),this.cardsPosition[t]},e.prototype.setLastCardSprite=function(t){var e=i.getCardSprite(t),o=this.root.cards.children;o[o.length-1].getComponent(cc.Sprite).spriteFrame=e,this.data.cards[this.data.cards.length-1]=t},e.prototype.setFirstCardSprite=function(t){var e=i.getCardSprite(t);this.root.cards.children[0].getComponent(cc.Sprite).spriteFrame=e,this.data.cards[0]=t},e.prototype.addCard=function(t,e){void 0===e&&(e=255);var o=this.getData().cards.length,n=this.getCardsPosition(o+1).slice(),r=this.root.cards,a=i.getCardNode(t);a.opacity=e,a.x=n[n.length-1],this.getData().cards.push(t),r.addChild(a)},e.prototype.setPoint=function(t){var e=t.soft,o=t.hard,n=t.blackjack,r=this.getPointStatus({soft:e,hard:o,blackjack:n});this.data.values={soft:e,hard:o,blackjack:n},r.point.length>2?this.root.$value.point.width=90:this.root.$value.point.width=56,this.root.$value["#point"].sprite.spriteFrame=r.sprite,this.root.$value.$point["#p"].label.string=r.point},e.prototype.getPointStatus=function(t){var e,o,n=t.soft,r=t.hard;return!0===t.blackjack?(e="",o=s.sprites.bj_point):21===r||21===n?(e="21",o=s.sprites.green_point):0===n||n>21?r<=21?(e=r+"",o=s.sprites.green_point):(e=r+"",o=22===r?s.sprites.blue_point:s.sprites.red_point):(e=r+"/"+n,o=s.sprites.green_two_point),{point:e,sprite:o}},e=r([u],e)}(cc.Component));o.default=f,cc._RF.pop()},{"./library/Audio":"Audio","./library/CocosUtils":"CocosUtils","./library/FreeBetSettingData":"FreeBetSettingData","./library/FreeBetUtils":"FreeBetUtils"}],FreeBetBJ:[function(t,e,o){"use strict";cc._RF.push(e,"c50dbtHhz9LObCj8R2fwi4z","FreeBetBJ");var n=this&&this.__awaiter||function(t,e,o,n){function r(t){return t instanceof o?t:new o(function(e){e(t)})}return new(o||(o=Promise))(function(o,a){function i(t){try{c(n.next(t))}catch(t){a(t)}}function s(t){try{c(n.throw(t))}catch(t){a(t)}}function c(t){t.done?o(t.value):r(t.value).then(i,s)}c((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(t){return function(e){return c([t,e])}}function c(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},a=this&&this.__spreadArrays||function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<o;e++)for(var a=arguments[e],i=0,s=a.length;i<s;i++,r++)n[r]=a[i];return n};Object.defineProperty(o,"__esModule",{value:!0}),o.freeBetBJ=o.FreeBetBJ=o.freeBetBjUtils=void 0;var i=t("./library/FreeBetSettingData");o.freeBetBjUtils={promiseInjector:function(t){var e=this;return function(o){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return e.injectPromise.apply(e,a([o.bind(t)],n))}},injectPromise:function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];return new Promise(function(o,n){t.apply(void 0,a(e,[function(t,e){null!==t?n(t):o(e)}]))})}};var s=function(){function t(t,e){void 0===e&&(e=null),this.injectPromise=o.freeBetBjUtils.promiseInjector(this),this.tableID=t,setTimeout(function(){e&&e(null)},100)}return t.prototype.sendRequest=function(t,e,o,a){return void 0===a&&(a=!1),n(this,void 0,void 0,function(){var n,i,s;return r(this,function(r){if(!a)return[2,this.injectPromise(this.sendRequest,t,e,o)];try{n=new XMLHttpRequest,i="https://testnet-games.lucknetwork.org/cardgames//"+t,n.open(o,i),"POST"===o&&n.setRequestHeader("Content-Type","application/json"),n.onreadystatechange=function(){var t;4==this.readyState&&(200==this.status?void 0!==(t=JSON.parse(this.responseText)).error?a(t.error,null):a(null,t):void 0!==(t=JSON.parse(this.responseText)).error?a(t.error,null):a("code: "+this.status+"\n"+this.statusText,null))},s=JSON.stringify(e),"GET"===o?n.send():n.send(s)}catch(t){a(t,null)}return[2]})})},t.prototype.getGameStatus=function(t,e){return void 0===t&&(t=""),void 0===e&&(e=!1),n(this,void 0,void 0,function(){var o;return r(this,function(n){return o={tableID:this.tableID,playerID:t},[2,this.sendRequest("get_game",o,e)]})})},t.prototype.joinTable=function(t,e,o,a,i,s){return void 0===s&&(s=!1),n(this,void 0,void 0,function(){var n;return r(this,function(r){return n={tableID:this.tableID,playerID:e,seatID:t,mainBet:o,sideBet:a,fortuneBet:i},[2,this.sendRequest("request_seat",n,s)]})})},t.prototype.leaveTable=function(t,e){return void 0===e&&(e=!1),n(this,void 0,void 0,function(){var o;return r(this,function(n){return o={tableID:this.tableID,playerID:t},[2,this.sendRequest("leave_seat",o,e)]})})},t.prototype.placeBet=function(t,e,o,a,i){return void 0===i&&(i=!1),n(this,void 0,void 0,function(){var n;return r(this,function(r){return n={tableID:this.tableID,playerID:t,mainBet:e,sideBet:o,fortuneBet:a},[2,this.sendRequest("place_bet",n,i)]})})},t.prototype.checkAlive=function(){return n(this,void 0,void 0,function(){return r(this,function(t){return[2,this.sendRequest("","","GET")]})})},t.prototype.getTableStatus=function(){return n(this,void 0,void 0,function(){return r(this,function(t){return[2,this.sendRequest("get_table/"+this.tableID,"","GET")]})})},t.prototype.getGame=function(){return n(this,void 0,void 0,function(){return r(this,function(t){return[2,this.sendRequest("get_game/"+this.tableID+"/"+i.freeBetSetting.gamerId,"","GET")]})})},t.prototype.getBalance=function(){return n(this,void 0,void 0,function(){return r(this,function(t){return[2,this.sendRequest("get_balance/"+this.tableID+"/"+i.freeBetSetting.gamerId,"","GET")]})})},t.prototype.startNewGame=function(t,e){return void 0===e&&(e=!1),n(this,void 0,void 0,function(){var o;return r(this,function(n){return o={bets:t},[2,this.sendRequest("start_game/"+this.tableID+"/"+i.freeBetSetting.gamerId,o,"POST",e)]})})},t.prototype.hit=function(t,e){return void 0===e&&(e=!1),n(this,void 0,void 0,function(){var o;return r(this,function(n){return o={},[2,this.sendRequest("action/hit/"+this.tableID+"/"+i.freeBetSetting.gamerId+"/"+t,o,"POST",e)]})})},t.prototype.stand=function(t,e){return void 0===e&&(e=!1),n(this,void 0,void 0,function(){var o;return r(this,function(n){return o={},[2,this.sendRequest("action/stand/"+this.tableID+"/"+i.freeBetSetting.gamerId+"/"+t,o,"POST",e)]})})},t.prototype.split=function(t,e){return void 0===e&&(e=!1),n(this,void 0,void 0,function(){var o;return r(this,function(n){return o={},[2,this.sendRequest("action/split/"+this.tableID+"/"+i.freeBetSetting.gamerId+"/"+t,o,"POST",e)]})})},t.prototype.freeSplit=function(t,e){return void 0===e&&(e=!1),n(this,void 0,void 0,function(){var o;return r(this,function(n){return o={},[2,this.sendRequest("action/free_split/"+this.tableID+"/"+i.freeBetSetting.gamerId+"/"+t,o,"POST",e)]})})},t.prototype.double=function(t,e){return void 0===e&&(e=!1),n(this,void 0,void 0,function(){var o;return r(this,function(n){return o={},[2,this.sendRequest("action/double/"+this.tableID+"/"+i.freeBetSetting.gamerId+"/"+t,o,"POST",e)]})})},t.prototype.freeDouble=function(t,e){return void 0===e&&(e=!1),n(this,void 0,void 0,function(){var o;return r(this,function(n){return o={},[2,this.sendRequest("action/free_double/"+this.tableID+"/"+i.freeBetSetting.gamerId+"/"+t,o,"POST",e)]})})},t}();o.FreeBetBJ=s,o.freeBetBJ=new s(i.freeBetSetting.tableId),cc._RF.pop()},{"./library/FreeBetSettingData":"FreeBetSettingData"}],FreeBetEvent:[function(t,e,o){"use strict";cc._RF.push(e,"21b75N1+7FNBZjUfBnWSltM","FreeBetEvent");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./PlayBet"),i=t("./Buttons"),s=t("./FreeBetBJ"),c=t("./library/CocosUtils"),l=t("./library/FreeBetUtils"),u=t("./library/FreeBetSettingData"),f=cc._decorator,p=f.ccclass,d=(f.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){this.table=this.node.getComponent("FreeBetTable")},e.prototype.effectServerEvent=function(t){var e,o=this,n=cc.tween(this.node),r=t.actionIndex,a=this.table.getPlayerScript(),f=this.table.getDealerScript(),p=this.table.getButtonsScript(),d=this.table.getBetScript(),h=a.data.rowCount.slice(),y=Object.assign({},a.data.focus);if(e=-1===t.focus.seat&&-1===t.focus.row?{seat:-1,row:-1}:{seat:t.seats[t.focus.seat].seatIndex,row:t.focus.row},p.actionIndex=t.actionIndex,0===r){!0===d.node.active&&d.effectOfHideBet(n);var g=[],b=[],v=[];(L=t.seats).forEach(function(t){t.rows.forEach(function(e,r){a.createPlayerBetEffects(n,t.seatIndex,r,e.bet),g[t.seatIndex]=e.cards.slice(),b[t.seatIndex]=Object.assign({},e.values),v[t.seatIndex]=o.getPlayBetStatusFromServer(e.status),h[r]++})}),f.createDealerEffects(n),a.turnBasePlayerBetEffects(n,g,b,v),f.turnBaseDealerEffects(n,t.dealerCards[0]),a.data.focus=e}else{var B=[0,0,0],S=[];(L=t.seats).forEach(function(t){B[t.seatIndex]=t.rows.length});for(var C=0;C<B.length;C++)if(h[C]<B[C]){var _=this.getServerSeat(L,y.seat).rows[y.row],E={seat:y.seat,row:y.row,fetchCard:_.cards.slice().pop(),soft:_.values.soft,hard:_.values.hard,blackjack:_.values.blackjack,status:this.getPlayBetStatusFromServer(_.status)},O=this.getServerSeat(L,y.seat).rows[B[C]-1],w={seat:C,row:B[C]-1,fetchCard:O.cards.slice().pop(),soft:O.values.soft,hard:O.values.hard,blackjack:O.values.blackjack,status:this.getPlayBetStatusFromServer(O.status)};a.splitPlayerBetEffects(n,E,w,O.bet,O.freeBet),h[C]++,S.push({seat:E.seat,row:E.row}),S.push({seat:w.seat,row:w.row})}for(var P=function(){var e=!1;if(S.forEach(function(t){t.seat===y.seat&&t.row===y.row&&(e=!0)}),e)return y=m.getNextFocus(B,y),"continue";var o=a.getPlayBet(y.seat,y.row).getComponent("PlayBet"),r=o.data.cards.length,i=m.getServerSeat(t.seats,y.seat).rows[y.row];i.bet===o.data.bet&&i.freeBet===o.data.freeBet||(n.call(function(){o.setBet(i.bet,i.freeBet)}),o.effectOfShowBet(n));for(var s=!1;r<i.cards.length;r++)s=!0,o.addCardEffects(n,i.cards[r],i.values,m.getPlayBetStatusFromServer(i.status));s||o.effectOfShowPointAndStatus(n,i.values,m.getPlayBetStatusFromServer(i.status)),y=m.getNextFocus(B,y)},m=this;y.seat!==e.seat&&y.row!==e.row;)P();if(-1!==y.seat&&-1!==y.row){var D=!1;if(S.forEach(function(t){t.seat===y.seat&&t.row===y.row&&(D=!0)}),!D){var F=a.getPlayBet(y.seat,y.row).getComponent("PlayBet"),I=F.data.cards.length,A=this.getServerSeat(t.seats,y.seat).rows[y.row];A.bet===F.data.bet&&A.freeBet===F.data.freeBet||(n.call(function(){F.setBet(A.bet,A.freeBet)}),F.effectOfShowBet(n));for(var N=!1;I<A.cards.length;I++)N=!0,F.addCardEffects(n,A.cards[I],A.values,this.getPlayBetStatusFromServer(A.status));N||F.effectOfShowPointAndStatus(n,A.values,this.getPlayBetStatusFromServer(A.status))}}}if("ongoing"===t.status){var R=Object.assign({},t.seats[t.focus.seat].rows[t.focus.row].actions),T=function(){var t=Object.keys(R);p.showButton(i.Button.BET_DEAL,!1),p.showButton(i.Button.END_REBET,!1),p.showButton(i.Button.END_CLEAN,!1),p.showButton(i.Button.PLAY_HIT,!0),p.showButton(i.Button.PLAY_STAND,!0),p.showButton(i.Button.PLAY_DOUBLE,!0),p.showButton(i.Button.PLAY_SPLIT,!0),t.forEach(function(t){R[t]&&p.showButton(o.getButtonFromServer(t),R[t]),p.enableButtonClick(o.getButtonFromServer(t),R[t])})};-1===y.seat&&-1===y.row?a.effectOfShowFocus(n,t.seats[t.focus.seat].seatIndex,t.focus.row,T):a.effectOfMoveFocus(n,t.seats[t.focus.seat].seatIndex,t.focus.row,T)}if("concluded"===t.status){-1!==a.data.focus.seat&&-1!==a.data.focus.row&&a.effectOfHideFocus(n);var L,k=t.dealerCards;f.turnSecondDealerEffects(n,k[1],this.getServerCardValue(k.slice(0,2)));for(C=2;C<k.length;C++)f.addCardEffects(n,k[C],this.getServerCardValue(k.slice(0,C+1)));(L=t.seats).forEach(function(t){t.rows.forEach(function(e,r){a.getPlayBet(t.seatIndex,r).getComponent("PlayBet").resultEffects(n,o.getResultStatusFromServer(e.result),e.returns-e.bet)})}),n.call(function(){p.hidePlayButtons(),p.showButton(i.Button.END_CLEAN,!0),p.showButton(i.Button.END_REBET,!0),p.enableButtonClick(i.Button.END_REBET,!0),p.enableButtonClick(i.Button.END_CLEAN,!0),s.freeBetBJ.getBalance().catch(function(t){c.default.error(t),o.table.gaming.showMessage(l.ClientErrorMessage.TOKEN_ERROR)}).then(function(t){t&&(c.default.log(t),u.freeBetSetting.balance=parseInt(t.available),o.table.getBalanceScript().updateMoney())})})}n.start()},e.prototype.noEffectServerEvent=function(t){var e=this,o=this.table.getPlayerScript(),n=this.table.getDealerScript(),r=this.table.getButtonsScript(),a=this.table.getBetScript();r.actionIndex=t.actionIndex;var s=t.seats,c=[0,0,0];s.forEach(function(t){c[t.seatIndex]=t.rows.length}),o.data.rowCount=c;var u=[0,0,0];s.forEach(function(t){t.rows.forEach(function(n,r){0===r&&(u[t.seatIndex]=n.bet);var a=o.addPlayBet(t.seatIndex,r).getComponent("PlayBet"),i=o.getPlayBetCardsPosition(n.cards.length);n.cards.forEach(function(t,e){var o=l.getCardNode(t);a.root.cards.addChild(o),o.x=i[e]}),a.data.cards=n.cards,a.root.bet.active=!0,a.setBet(n.bet,n.freeBet),a.setPointAndStatus(n.values,e.getPlayBetStatusFromServer(n.status))})}),a.betData=u,n.addCard(t.dealerCards[0]),n.addCard(52);var f=!1;c.forEach(function(t){4===t&&(f=!0)}),f&&(n.root.cards.y+=190,n.root.value.y+=190);var p=cc.tween(this.node);o.effectOfShowFocus(p,s[t.focus.seat].seatIndex,t.focus.row);var d=Object.assign({},s[t.focus.seat].rows[t.focus.row].actions);p.call(function(){var t=Object.keys(d);r.showButton(i.Button.BET_DEAL,!1),r.showButton(i.Button.END_REBET,!1),r.showButton(i.Button.END_CLEAN,!1),r.showButton(i.Button.PLAY_HIT,!0),r.showButton(i.Button.PLAY_STAND,!0),r.showButton(i.Button.PLAY_DOUBLE,!0),r.showButton(i.Button.PLAY_SPLIT,!0),t.forEach(function(t){d[t]&&r.showButton(e.getButtonFromServer(t),d[t]),r.enableButtonClick(e.getButtonFromServer(t),d[t])})}),p.start()},e.prototype.getPlayBetStatusFromServer=function(t){switch(t){case"busted":return a.PlayBetStatus.BUSTED;case"waiting":return a.PlayBetStatus.WAITING;case"stand":return a.PlayBetStatus.STAND}},e.prototype.getButtonFromServer=function(t){switch(t){case"hit":return i.Button.PLAY_HIT;case"stand":return i.Button.PLAY_STAND;case"split":return i.Button.PLAY_SPLIT;case"double":return i.Button.PLAY_DOUBLE;case"free_split":return i.Button.PLAY_FREE_SPLIT;case"free_double":return i.Button.PLAY_FREE_DOUBLE}},e.prototype.getResultStatusFromServer=function(t){switch(t){case"win":return a.PlayBetResultStatus.WIN;case"lose":return a.PlayBetResultStatus.LOSS;case"push":return a.PlayBetResultStatus.PUSH}},e.prototype.getNextFocus=function(t,e){for(var o=e.seat,n=e.row;o<t.length;){if(n+1<t[o])return{seat:o,row:n+1};o++,n=-1}return{seat:-1,row:-1}},e.prototype.getServerSeat=function(t,e){var o=null;return t.forEach(function(t){t.seatIndex===e&&(o=t)}),o},e.prototype.getServerCardValue=function(t){for(var e=0,o=!1,n=!1,r=0;r<t.length;r++){var a=t[r]%13;a>=1&&a<=8?e+=a+1:a>=9?(e+=10,n=!0):0==a&&(e+=1,o=!0)}return{hard:e,soft:o?e+10:0,blackjack:11==e&&o&&n}},e=r([p],e)}(cc.Component));o.default=d,cc._RF.pop()},{"./Buttons":"Buttons","./FreeBetBJ":"FreeBetBJ","./PlayBet":"PlayBet","./library/CocosUtils":"CocosUtils","./library/FreeBetSettingData":"FreeBetSettingData","./library/FreeBetUtils":"FreeBetUtils"}],FreeBetSettingData:[function(t,e,o){"use strict";cc._RF.push(e,"af162fYffJKPY5xC0vphj0t","FreeBetSettingData"),Object.defineProperty(o,"__esModule",{value:!0}),o.voice=o.ruleUrl=o.settings=o.GamePlayers=o.sprites=o.atlas=o.prefabs=o.freeBetSetting=void 0,o.freeBetSetting={betUnit:0,maxBet:0,minBet:0,gamerId:"",tableId:"blackjack_table",balance:0},o.prefabs={FreeBetTable:null,PlayBet:null},o.atlas={cards:null,cardStack:null},o.sprites={green_point:null,red_point:null,blue_point:null,green_two_point:null,bj_point:null,win:null,push:null,loss:null},function(t){t.DEALER="dealer",t.PLAYER="player"}(o.GamePlayers||(o.GamePlayers={})),o.settings={sound:!1,music:!1},o.ruleUrl={en:"https://lucknetwork.zendesk.com/hc/en-us/articles/360047583793-Freebet-21-Game-Intro",chs:"https://lucknetwork.zendesk.com/hc/en-us/articles/360047583673-%E5%85%8D%E8%B4%B9%E5%8A%A0%E5%80%8D21%E7%82%B9-"},o.voice={bg:null,bj:null,focus:null,popup:null,popdown:null,chip:null,win:null,turnCard:null,sendCard:null,clickButton:null,grabChip:null},cc._RF.pop()},{}],FreeBetTable:[function(t,e,o){"use strict";cc._RF.push(e,"2297d7tD+1DRK/NXb9Aoj84","FreeBetTable");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./library/CocosUtils"),i=t("./FreeBetBJ"),s=t("./library/FreeBetUtils"),c=t("./library/FreeBetSettingData"),l=t("./Buttons"),u=cc._decorator,f=u.ccclass,p=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gaming=null,e}return n(e,t),e.prototype.init=function(){this.root=a.default.tree(this.node,{})},e.prototype.onLoad=function(){this.init(),this.gaming=s.getCurrentSceneNode().getComponent("Gaming")},e.prototype.start=function(){var t=this;i.freeBetBJ.getBalance().catch(function(e){a.default.error(e),t.gaming.showMessage(s.ClientErrorMessage.TOKEN_ERROR)}).then(function(e){e&&(a.default.log(e),c.freeBetSetting.balance=parseInt(e.available),t.getBalanceScript().updateMoney(),t.getBetScript().init(),t.getBetScript().updateBetMax(),i.freeBetBJ.getGame().catch(function(e){a.default.error(e),t.gaming.showMessage(e)}).then(function(e){if(e)if(a.default.log(e),"no_game"===e.status){var o=cc.tween(t.node);t.getBetScript().effectOfShowBet(o,function(){t.getButtonsScript().showButton(l.Button.BET_DEAL,!0),t.getButtonsScript().updateDealButtonStatus()}),o.start()}else"ongoing"===e.status&&t.getEventScript().noEffectServerEvent(e)}))})},e.prototype.addEffectNode=function(t){this.root.effectNodes.addChild(t)},e.prototype.clearEffectNodes=function(){this.root.effectNodes.destroyAllChildren()},e.prototype.getDealerScript=function(){return this.node.getChildByName("Dealer").getComponent("Dealer")},e.prototype.getBalanceScript=function(){return this.root.Balance.getComponent("Balance")},e.prototype.getPlayerScript=function(){return this.root.Player.getComponent("Player")},e.prototype.getBetScript=function(){return this.root.Bet.getComponent("Bet")},e.prototype.getButtonsScript=function(){return this.root.Buttons.getComponent("Buttons")},e.prototype.getEventScript=function(){return this.node.getComponent("FreeBetEvent")},e=r([f],e)}(cc.Component));o.default=p,cc._RF.pop()},{"./Buttons":"Buttons","./FreeBetBJ":"FreeBetBJ","./library/CocosUtils":"CocosUtils","./library/FreeBetSettingData":"FreeBetSettingData","./library/FreeBetUtils":"FreeBetUtils"}],FreeBetText:[function(t,e,o){"use strict";cc._RF.push(e,"37fb5IZkg1FPofneGiYYCLX","FreeBetText");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,s=a.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return n(e,t),e.prototype.start=function(){},r([s(cc.Label)],e.prototype,"label",void 0),r([s],e.prototype,"text",void 0),e=r([i],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],FreeBetUtils:[function(t,e,o){"use strict";cc._RF.push(e,"a5ba2Rz4ElFyofPqdQEBjZs","FreeBetUtils"),Object.defineProperty(o,"__esModule",{value:!0}),o.ClientErrorMessage=o.ServerErrorMessage=o.handleErrorMessage=o.bigSmallNode=o.flashNode=o.getCardNode=o.getCardSprite=o.getCurrentSceneNode=o.getXYUntilNode=o.getEaseObject=o.handleDelayCallback=o.DelayOption=o.zOrder=o.Easing=void 0;var n,r,a=cc.Sprite.SizeMode,i=t("./FreeBetSettingData");(function(t){t.linear="linear",t.fade="fade",t.quadIn="quadIn",t.quadOut="quadOut",t.quadInOut="quadInOut",t.quadOutIn="quadOutIn",t.cubicIn="cubicIn",t.cubicOut="cubicOut",t.cubicInOut="cubicInOut",t.cubicOutIn="cubicOutIn",t.quartIn="quartIn",t.quartOut="quartOut",t.quartInOut="quartInOut",t.quartOutIn="quartOutIn",t.quintIn="quintIn",t.quintOut="quintOut",t.quintInOut="quintInOut",t.quintOutIn="quintOutIn",t.sineIn="sineIn",t.sineOut="sineOut",t.sineInOut="sineInOut",t.sineOutIn="sineOutIn",t.expoIn="expoIn",t.expoOut="expoOut",t.expoInOut="expoInOut",t.expoOutIn="expoOutIn",t.circIn="circIn",t.circOut="circOut",t.circInOut="circInOut",t.circOutIn="circOutIn",t.elasticIn="elasticIn",t.elasticOut="elasticOut",t.elasticInOut="elasticInOut",t.elasticOutIn="elasticOutIn",t.backIn="backIn",t.backOut="backOut",t.backInOut="backInOut",t.backOutIn="backOutIn",t.bounceIn="bounceIn",t.bounceOut="bounceOut",t.bounceInOut="bounceInOut",t.bounceOutIn="bounceOutIn"})(n=o.Easing||(o.Easing={})),function(t){t[t.zIndex_MIN=0]="zIndex_MIN",t[t.zIndex_1=1]="zIndex_1",t[t.zIndex_2=2]="zIndex_2",t[t.zIndex_3=3]="zIndex_3",t[t.zIndex_4=4]="zIndex_4",t[t.zIndex_5=5]="zIndex_5",t[t.zIndex_6=6]="zIndex_6",t[t.zIndex_7=7]="zIndex_7",t[t.zIndex_8=8]="zIndex_8",t[t.zIndex_MAX=9]="zIndex_MAX"}(o.zOrder||(o.zOrder={})),function(t){t[t.NO_DELAY=0]="NO_DELAY",t[t.SEAMLESS=1]="SEAMLESS",t[t.SEAMLESS_PLUS_CUSTOM=2]="SEAMLESS_PLUS_CUSTOM",t[t.CUSTOM=3]="CUSTOM"}(r=o.DelayOption||(o.DelayOption={})),o.handleDelayCallback=function(t,e,o,n,a){switch(void 0===n&&(n=0),void 0===a&&(a=null),e){case r.SEAMLESS_PLUS_CUSTOM:t.delay(o+n);break;case r.SEAMLESS:t.delay(o);break;case r.NO_DELAY:break;case r.CUSTOM:t.delay(n)}null!==a&&t.call(function(){a()})},o.getEaseObject=function(t){return{easing:t}},o.getXYUntilNode=function(t,e,n){return void 0===n&&(n={x:0,y:0}),t===e?n:(n.x+=t.x,n.y+=t.y,o.getXYUntilNode(t.parent,e,n))},o.getCurrentSceneNode=function(){return cc.director.getScene().getChildByName("Canvas")},o.getCardSprite=function(t){var e=null;return i.atlas.cards.getSpriteFrames().forEach(function(o){e=parseInt(o.name)===t?o:e}),e},o.getCardNode=function(t,e,n){void 0===e&&(e=92),void 0===n&&(n=116);var r=new cc.Node("card");r.width=e,r.height=n,r.is3DNode=!0;var i=r.addComponent(cc.Sprite);return i.sizeMode=a.CUSTOM,i.spriteFrame=o.getCardSprite(t),r},o.flashNode=function(t){cc.tween(t).to(.125,{opacity:50}).to(.125,{opacity:255}).start()},o.bigSmallNode=function(t){cc.tween(t).to(.125,{scaleX:1.1,scaleY:1.1},o.getEaseObject(n.sineOut)).to(.125,{scaleX:1,scaleY:1},o.getEaseObject(n.sineIn)).start()},o.handleErrorMessage=function(t){t},o.ServerErrorMessage||(o.ServerErrorMessage={}),function(t){t.TOKEN_ERROR="Platform token id error. Please sign in again.",t.INSUFFICIENT_BALANCE="Insufficient balance."}(o.ClientErrorMessage||(o.ClientErrorMessage={})),cc._RF.pop()},{"./FreeBetSettingData":"FreeBetSettingData"}],Gaming:[function(t,e,o){"use strict";cc._RF.push(e,"133eeKvqvBEQIrkBJ9vo7Ls","Gaming");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./library/FreeBetSettingData"),i=t("./library/FreeBetUtils"),s=t("./FreeBetBJ"),c=t("./library/CocosUtils"),l=cc._decorator,u=l.ccclass,f=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Notice=null,e.notice=null,e.message=null,e.messageJs=null,e}return n(e,t),e.prototype.onLoad=function(){this.message=this.node.getChildByName("Message"),this.messageJs=this.message.getComponent("Message")},e.prototype.start=function(){var t=this,e=new URL(location.href),o=cc.sys.localStorage.getItem("pid");if(null===e.searchParams.get("pid")&&null===o)this.messageJs.setMessage(i.ClientErrorMessage.TOKEN_ERROR);else{var n=null===e.searchParams.get("pid")?o:e.searchParams.get("pid");cc.sys.localStorage.setItem("pid",n),a.freeBetSetting.gamerId=n,this.hideUrl(),s.freeBetBJ.checkAlive().catch(function(e){c.default.error(e),t.messageJs.setMessage(e)}).then(function(e){c.default.log(e),e&&(t.messageJs.setMessage("Preparing Table..."),s.freeBetBJ.getTableStatus().catch(function(e){c.default.error(e),t.messageJs.setMessage(e)}).then(function(e){e&&(c.default.log(e),t.messageJs.hide(),a.freeBetSetting.tableId=e.tableID,a.freeBetSetting.betUnit=e.betUnit,a.freeBetSetting.maxBet=e.maxBet,a.freeBetSetting.minBet=e.minBet,t.node.addChild(cc.instantiate(a.prefabs.FreeBetTable)))}))})}},e.prototype.showMessage=function(t){this.messageJs.setMessage(t),this.node.addChild(this.message),this.messageJs.show()},e.prototype.showNotice=function(t,e){void 0===e&&(e="NOTICE"),null===this.notice&&(this.notice=cc.instantiate(this.Notice),this.notice.getComponent("Notice").init());var o=this.notice.getComponent("Notice");o.setTitle(e),o.setMessage(t),this.node.addChild(this.notice),o.show()},e.prototype.hideUrl=function(){var t=window.location.href.split("?")[0];history.pushState({},"",t)},r([f(cc.Prefab)],e.prototype,"Notice",void 0),e=r([u],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./FreeBetBJ":"FreeBetBJ","./library/CocosUtils":"CocosUtils","./library/FreeBetSettingData":"FreeBetSettingData","./library/FreeBetUtils":"FreeBetUtils"}],I18N:[function(t,e,o){"use strict";cc._RF.push(e,"5ab91pcdAdASJDrdbnuVOo3","I18N"),cc._RF.pop()},{}],Loading:[function(t,e,o){"use strict";cc._RF.push(e,"55cb1QFN69Kx6q9CXfPnL9N","Loading");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./library/CocosUtils"),i=t("./library/FreeBetSettingData"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.now=0,e.loadCount=22,e}return n(e,t),e.prototype.init=function(){this.root=a.default.tree(this.node,{})},e.prototype.onLoad=function(){this.init()},e.prototype.start=function(){this.loadResources()},e.prototype.loadResources=function(){var t=this;cc.director.preloadScene("Gaming"),cc.assetManager.loadBundle("resources",cc.Prefab,function(e,o){e||(o.load("prefab/FreeBetTable",function(e,o){e||(i.prefabs.FreeBetTable=o,t.now++,t.onComplete())}),o.load("prefab/PlayBet",function(e,o){e||(i.prefabs.PlayBet=o,t.now++,t.onComplete())}),o.load("atlas/cards_plist",function(e,o){e||(i.atlas.cards=o,t.now++,t.onComplete())}),o.load("image/green_point",function(e,o){if(!e){var n=new cc.SpriteFrame;n.setTexture(o),i.sprites.green_point=n,t.now++,t.onComplete()}}),o.load("image/red_point",function(e,o){if(!e){var n=new cc.SpriteFrame;n.setTexture(o),i.sprites.red_point=n,t.now++,t.onComplete()}}),o.load("image/green_two_point",function(e,o){if(!e){var n=new cc.SpriteFrame;n.setTexture(o),i.sprites.green_two_point=n,t.now++,t.onComplete()}}),o.load("image/bj_point",function(e,o){if(!e){var n=new cc.SpriteFrame;n.setTexture(o),i.sprites.bj_point=n,t.now++,t.onComplete()}}),o.load("image/blue_point",function(e,o){if(!e){var n=new cc.SpriteFrame;n.setTexture(o),i.sprites.blue_point=n,t.now++,t.onComplete()}}),o.load("image/win",function(e,o){if(!e){var n=new cc.SpriteFrame;n.setTexture(o),i.sprites.win=n,t.now++,t.onComplete()}}),o.load("image/loss",function(e,o){if(!e){var n=new cc.SpriteFrame;n.setTexture(o),i.sprites.loss=n,t.now++,t.onComplete()}}),o.load("image/push",function(e,o){if(!e){var n=new cc.SpriteFrame;n.setTexture(o),i.sprites.push=n,t.now++,t.onComplete()}}),o.load("voice/bg",function(e,o){e||(i.voice.bg=o,t.now++,t.onComplete())}),o.load("voice/bj",function(e,o){e||(i.voice.bj=o,t.now++,t.onComplete())}),o.load("voice/chip",function(e,o){e||(i.voice.chip=o,t.now++,t.onComplete())}),o.load("voice/clickButton",function(e,o){e||(i.voice.clickButton=o,t.now++,t.onComplete())}),o.load("voice/focus",function(e,o){e||(i.voice.focus=o,t.now++,t.onComplete())}),o.load("voice/grabChip",function(e,o){e||(i.voice.grabChip=o,t.now++,t.onComplete())}),o.load("voice/popdown",function(e,o){e||(i.voice.popdown=o,t.now++,t.onComplete())}),o.load("voice/popup",function(e,o){e||(i.voice.popup=o,t.now++,t.onComplete())}),o.load("voice/sendCard",function(e,o){e||(i.voice.sendCard=o,t.now++,t.onComplete())}),o.load("voice/turnCard",function(e,o){e||(i.voice.turnCard=o,t.now++,t.onComplete())}),o.load("voice/win",function(e,o){e||(i.voice.win=o,t.now++,t.onComplete())}))})},e.prototype.onComplete=function(){this.effectOfProgressBar()},e.prototype.loadingComplete=function(){cc.director.loadScene("Gaming")},e.prototype.effectOfProgressBar=function(){var t=this,e=this.root.$progressBar.bar;e.getNumberOfRunningActions()>0&&e.stopAllActions();var o=this.root.progressBar.width,n=Math.floor(o*this.now/this.loadCount);cc.tween(e).to(1,{width:n}).call(function(){t.now===t.loadCount&&t.loadingComplete()}).start()},e=r([c],e)}(cc.Component));o.default=l,cc._RF.pop()},{"./library/CocosUtils":"CocosUtils","./library/FreeBetSettingData":"FreeBetSettingData"}],Message:[function(t,e,o){"use strict";cc._RF.push(e,"21636gfYzVIdayxd1gFRE1V","Message");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./library/CocosUtils"),i=t("./library/FreeBetUtils"),s=t("./library/Audio"),c=t("./library/FreeBetSettingData"),l=cc._decorator,u=l.ccclass,f=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasInit=!1,e}return n(e,t),e.prototype.init=function(){this.hasInit||(this.root=a.default.tree(this.node,{}),this.hasInit=!0)},e.prototype.onLoad=function(){this.init()},e.prototype.start=function(){},e.prototype.setMessage=function(t){this.root.$bg["#label"].label.string=t},e.prototype.show=function(){s.audio.playEffect(c.voice.popup);var t=this.root.bg;cc.tween(t).to(.4,{scaleX:1,scaleY:1},i.getEaseObject(i.Easing.backOut)).start()},e.prototype.hide=function(){s.audio.playEffect(c.voice.popdown);var t=this.root.bg;t.scaleX=t.scaleY=.1,this.node.parent.removeChild(this.node,!1)},e=r([u],e)}(cc.Component));o.default=f,cc._RF.pop()},{"./library/Audio":"Audio","./library/CocosUtils":"CocosUtils","./library/FreeBetSettingData":"FreeBetSettingData","./library/FreeBetUtils":"FreeBetUtils"}],Notice:[function(t,e,o){"use strict";cc._RF.push(e,"aa78dByLVFMa5gzBCy+D/hD","Notice");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./library/FreeBetUtils"),i=t("./library/CocosUtils"),s=t("./library/Audio"),c=t("./library/FreeBetSettingData"),l=cc._decorator,u=l.ccclass,f=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasInit=!1,e}return n(e,t),e.prototype.init=function(){this.hasInit||(this.root=i.default.tree(this.node,{}),this.hasInit=!0)},e.prototype.onLoad=function(){this.init()},e.prototype.start=function(){},e.prototype.show=function(){s.audio.playEffect(c.voice.popup);var t=this.root.bg;t.scaleX=t.scaleY=.1,cc.tween(t).to(.4,{scaleX:1,scaleY:1},a.getEaseObject(a.Easing.backOut)).start()},e.prototype.hide=function(){var t=this;s.audio.playEffect(c.voice.popdown);var e=this.root.bg;cc.tween(e).to(.4,{scaleX:.1,scaleY:.1},a.getEaseObject(a.Easing.backIn)).call(function(){t.node.parent.removeChild(t.node,!1)}).start()},e.prototype.onOkClick=function(t){s.audio.playEffect(c.voice.clickButton);var e=t.target;this.root.bg.getNumberOfRunningActions()>0||e.getNumberOfRunningActions()>0||(a.flashNode(e),this.hide())},e.prototype.setMessage=function(t){this.root.$bg["#label"].label.string=t},e.prototype.setTitle=function(t){this.root.$bg["#title"].label.string=t},e=r([u],e)}(cc.Component));o.default=f,cc._RF.pop()},{"./library/Audio":"Audio","./library/CocosUtils":"CocosUtils","./library/FreeBetSettingData":"FreeBetSettingData","./library/FreeBetUtils":"FreeBetUtils"}],PayTable:[function(t,e,o){"use strict";cc._RF.push(e,"4427fAPsaFA97eEIcUIGNWa","PayTable");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./library/CocosUtils"),i=t("./library/FreeBetUtils"),s=t("./library/Audio"),c=t("./library/FreeBetSettingData"),l=cc._decorator,u=l.ccclass,f=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasInit=!1,e}return n(e,t),e.prototype.init=function(){this.hasInit||(this.root=a.default.tree(this.node,{}),this.hasInit=!0)},e.prototype.onLoad=function(){this.init()},e.prototype.start=function(){},e.prototype.show=function(){s.audio.playEffect(c.voice.popup);var t=this.root.bg;t.scaleX=t.scaleY=.1,cc.tween(t).to(.4,{scaleX:1,scaleY:1},i.getEaseObject(i.Easing.backOut)).start()},e.prototype.hide=function(){var t=this;s.audio.playEffect(c.voice.popdown);var e=this.root.bg;cc.tween(e).to(.4,{scaleX:.1,scaleY:.1},i.getEaseObject(i.Easing.backIn)).call(function(){t.node.parent.removeChild(t.node,!1)}).start()},e.prototype.onOkClick=function(t){s.audio.playEffect(c.voice.clickButton);var e=t.target;this.root.bg.getNumberOfRunningActions()>0||e.getNumberOfRunningActions()>0||(i.flashNode(e),this.hide())},e=r([u],e)}(cc.Component));o.default=f,cc._RF.pop()},{"./library/Audio":"Audio","./library/CocosUtils":"CocosUtils","./library/FreeBetSettingData":"FreeBetSettingData","./library/FreeBetUtils":"FreeBetUtils"}],PlayBet:[function(t,e,o){"use strict";cc._RF.push(e,"60557TeC51H4ZkUJmmmu37w","PlayBet");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.PlayBetResultStatus=o.PlayBetStatus=void 0;var a,i,s=t("./library/CocosUtils"),c=t("./library/FreeBetUtils"),l=t("./library/FreeBetSettingData"),u=t("./library/Audio"),f=cc._decorator,p=f.ccclass,d=(f.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasInit=!1,e.effectDuration={showBet:.25,showResult:.15,showResultType:.15,transferCard:.2,turnCard:.125,showPoint:.2,showStatus:.2},e.data={cards:[],values:{soft:0,hard:0,blackjack:!1},status:a.NONE,bet:0,freeBet:0,returns:0,actions:{hit:!1,stand:!1,split:!1,double:!1,free_split:!1,free_double:!1},seat:-1,row:-1},e}return n(e,t),e.prototype.init=function(){this.hasInit||(this.root=s.default.tree(this.node,{}),this.player=this.node.getParent().getParent().getComponent("Player"),this.hasInit=!0)},e.prototype.onLoad=function(){this.init()},e.prototype.start=function(){},e.prototype.effectOfTransferCard=function(t,e){var o=this;void 0===e&&(e=null);var n=this.getData().cards.length,r=this.root.cards.children,a=this.player.getPlayBetCardsPosition(n+1).slice(),i=0;n>=2&&n<=6&&(r.forEach(function(e,n){t.call(function(){cc.tween(e).to(o.effectDuration.transferCard,{x:a[n]}).start()})}),i=this.effectDuration.transferCard),c.handleDelayCallback(t,c.DelayOption.SEAMLESS_PLUS_CUSTOM,i,.075,e)},e.prototype.effectOfShowBet=function(t,e){var o=this;void 0===e&&(e=null);var n=this.root.bet;t.call(function(){n.active=!0,n.scaleX=0,cc.tween(n).to(o.effectDuration.showBet,{scaleX:1},c.getEaseObject(c.Easing.backOut)).start()}),c.handleDelayCallback(t,c.DelayOption.SEAMLESS,this.effectDuration.showBet,.075,e)},e.prototype.effectOfShowResult=function(t,e){var o=this;void 0===e&&(e=null);var n=this.root.result;t.call(function(){n.active=!0,n.scaleX=0,cc.tween(n).to(o.effectDuration.showResult,{scaleX:1},c.getEaseObject(c.Easing.backOut)).start()}),c.handleDelayCallback(t,c.DelayOption.SEAMLESS,this.effectDuration.showResult,0,e)},e.prototype.effectOfShowResultType=function(t,e){var o=this;void 0===e&&(e=null);var n=this.root.resultType;t.call(function(){n.active=!0,n.scaleX=0,u.audio.playEffect(l.voice.win),cc.tween(n).to(o.effectDuration.showBet,{scaleX:1},c.getEaseObject(c.Easing.backOut)).start()}),c.handleDelayCallback(t,c.DelayOption.SEAMLESS,this.effectDuration.showResultType,0,e)},e.prototype.effectOfTurnLastCard=function(t,e,o){var n=this;void 0===o&&(o=null),t.call(function(){var t=n.root.cards.children,o=t[t.length-1],r=cc.tween(o);u.audio.playEffect(l.voice.turnCard),r.to(n.effectDuration.turnCard,{y:15,eulerAngles:cc.v3(-10,90,-10)}).call(function(){n.setLastCardSprite(e),o.eulerAngles=cc.v3(10,270,10)}).to(n.effectDuration.turnCard,{y:0,eulerAngles:cc.v3(0,0,0)}).start()}),c.handleDelayCallback(t,c.DelayOption.SEAMLESS,2*this.effectDuration.turnCard,.075,o)},e.prototype.effectOfTurnFirstCard=function(t,e,o){var n=this;void 0===o&&(o=null),t.call(function(){var t=n.root.cards.children[0],o=cc.tween(t);u.audio.playEffect(l.voice.turnCard),o.to(n.effectDuration.turnCard,{y:15,eulerAngles:cc.v3(-10,90,-10)}).call(function(){n.setFirstCardSprite(e),t.eulerAngles=cc.v3(10,270,10)}).to(n.effectDuration.turnCard,{y:0,eulerAngles:cc.v3(0,0,0)}).start()}),c.handleDelayCallback(t,c.DelayOption.SEAMLESS_PLUS_CUSTOM,2*this.effectDuration.turnCard,.075,o)},e.prototype.effectOfShowPointAndStatus=function(t,e,o,n){var r=this,a=e.soft,i=e.hard,s=e.blackjack;void 0===n&&(n=null);var f=0,p=!(this.data.values.hard===i&&this.data.values.soft===a&&this.data.values.blackjack===s),d=this.data.status!==o;(p||d)&&(f+=this.effectDuration.showPoint),t.call(function(){if(r.setPointAndStatus({soft:a,hard:i,blackjack:s},o),p){var t=r.root.$value.point;t.scaleX=t.scaleY=0,cc.tween(t).call(function(){s&&u.audio.playEffect(l.voice.bj)}).to(r.effectDuration.showPoint,{scaleX:1,scaleY:1},c.getEaseObject(c.Easing.backOut)).start()}if(d){var e=r.root.status;e.scaleX=e.scaleY=0,cc.tween(e).to(r.effectDuration.showStatus,{scaleX:1,scaleY:1},c.getEaseObject(c.Easing.backOut)).start()}}),c.handleDelayCallback(t,c.DelayOption.SEAMLESS,f,.075,n)},e.prototype.addCardEffects=function(t,e,o,n){var r=this;this.effectOfTransferCard(t),this.player.effectOfDealerSendCard(t,this.data.seat,this.data.row,function(){r.addCard(52),r.player.table.clearEffectNodes()}),this.effectOfTurnLastCard(t,e),this.effectOfShowPointAndStatus(t,o,n)},e.prototype.resultEffects=function(t,e,o){var n=this;t.call(function(){n.root["#bet"].label.string=n.getBetString(0,0),n.setResult(o),n.setResultType(e)}),this.effectOfShowResultType(t),this.effectOfShowResult(t)},e.prototype.getData=function(){return this.data},e.prototype.setBet=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var o=this.root["#bet"].label;this.data.bet=t,this.data.freeBet=e,o.string=this.getBetString(t,e)},e.prototype.getBetString=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var o=0===t?"":t+"",n=0===e?"":e+"";return 0===t&&0===e?"":0===t?"$ "+n+" free":0===e?"$ "+o:"$ "+o+" + "+n+" free"},e.prototype.setResult=function(t){var e=this.root.result,o=this.root["#result"].label;t>0?(e.color=cc.Color.GREEN,o.string="+"+t):t<0?(e.color=cc.Color.RED,o.string=""+t):(e.color=new cc.Color(0,244,244),o.string="+"+t)},e.prototype.setResultType=function(t){var e=this.root.$resultType["#bg"].sprite,o=this.root.$resultType["#label"].label;switch(t){case i.LOSS:e.spriteFrame=l.sprites.loss,o.string="LOSS";break;case i.PUSH:e.spriteFrame=l.sprites.push,o.string="PUSH";break;case i.WIN:e.spriteFrame=l.sprites.win,o.string="WIN"}},e.prototype.setLastCardSprite=function(t){var e=c.getCardSprite(t),o=this.root.cards.children;o[o.length-1].getComponent(cc.Sprite).spriteFrame=e,this.data.cards[this.data.cards.length-1]=t;var n=this.player.getCardsDetailJs();n.seat===this.data.seat&&n.row===this.data.row&&this.player.getCardsDetailJs().showCardsDetail(this.data.cards,this.data.seat,this.data.row)},e.prototype.setFirstCardSprite=function(t){var e=c.getCardSprite(t);this.root.cards.children[0].getComponent(cc.Sprite).spriteFrame=e,this.data.cards[0]=t},e.prototype.getLastCard=function(){var t=this.root.cards.children;return t[t.length-1]},e.prototype.getCardSpriteNumber=function(t){return parseInt(t.getComponent(cc.Sprite).spriteFrame.name)},e.prototype.getNextCardPosition=function(){var t=this.data.cards.length,e=this.player.getPlayBetCardsPosition(t+1);return t>=4?e[e.length-2]:e[e.length-1]},e.prototype.addCard=function(t){var e=this.getData().cards.length,o=this.player.getPlayBetCardsPosition(e+1).slice(),n=this.root.cards,r=c.getCardNode(t);r.x=o[o.length-1],this.getData().cards.push(t),n.addChild(r)},e.prototype.setPointAndStatus=function(t,e){var o=t.soft,n=t.hard,r=t.blackjack,a=this.getPointStatus({soft:o,hard:n,blackjack:r},e);this.data.values={soft:o,hard:n,blackjack:r},this.data.status=e,a.point.length>2?(this.root.$value.point.x=-60,this.root.$value.point.width=90):(this.root.$value.point.x=-77,this.root.$value.point.width=56),this.root.$value["#point"].sprite.spriteFrame=a.sprite,this.root.$value.$point["#p"].label.string=a.point,this.root["#status"].label.string=a.status},e.prototype.getPointStatus=function(t,e){var o,n,r=t.soft,a=t.hard,i=e;return!0===t.blackjack?(o="",n=l.sprites.bj_point):21===a||21===r?(o="21",n=l.sprites.green_point):0===r||r>21?a<=21?(o=a+"",n=l.sprites.green_point):(o=a+"",n=l.sprites.red_point):(o=a+"/"+r,n=l.sprites.green_two_point),{point:o,sprite:n,status:i}},e.prototype.removeLastCard=function(){var t=this.root.cards;t.children[t.children.length-1].destroy(),this.getData().cards.pop()},e.prototype.onPlayBetClick=function(){if(!(this.data.cards.length<5)){var t=this.player.getCardsDetailJs();t.seat===this.data.seat&&t.row===this.data.row||this.player.getCardsDetailJs().showCardsDetail(this.data.cards,this.data.seat,this.data.row)}},e=r([p],e)}(cc.Component));o.default=d,function(t){t.WAITING="Waiting",t.BUSTED="Busted",t.STAND="Stand",t.NONE=""}(a=o.PlayBetStatus||(o.PlayBetStatus={})),function(t){t.WIN="win",t.LOSS="loss",t.PUSH="push"}(i=o.PlayBetResultStatus||(o.PlayBetResultStatus={})),cc._RF.pop()},{"./library/Audio":"Audio","./library/CocosUtils":"CocosUtils","./library/FreeBetSettingData":"FreeBetSettingData","./library/FreeBetUtils":"FreeBetUtils"}],Player:[function(t,e,o){"use strict";cc._RF.push(e,"0de6dXiwGBCL7XHOk0SQ4qf","Player");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./library/FreeBetUtils"),i=t("./library/CocosUtils"),s=t("./library/FreeBetSettingData"),c=t("./library/Audio"),l=cc._decorator,u=l.ccclass,f=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.playBetCardsPosition=null,e.effectDuration={moveFocus:.4,showFocus:.25,dealerSendCard:.2,splitMoveCard:.2},e.data={focus:{seat:-1,row:-1},rowCount:[0,0,0]},e}return n(e,t),e.prototype.init=function(){this.root=i.default.tree(this.node,{})},e.prototype.onLoad=function(){this.init()},e.prototype.start=function(){this.table=this.node.parent.getComponent("FreeBetTable"),this.getCardsDetailJs().init()},e.prototype.reset=function(){this.data.focus.seat=-1,this.data.focus.row=-1,this.data.rowCount=[0,0,0],this.root.playBets.destroyAllChildren()},e.prototype.getCardsDetailJs=function(){return this.node.getChildByName("CardsDetail").getComponent("CardsDetail")},e.prototype.getPlayBetPosition=function(t,e){var o=0;switch(t){case 0:o=240;break;case 2:o=-240}return{x:o,y:192*e-168}},e.prototype.addPlayBet=function(t,e){var o=this.getPlayBetPosition(t,e),n=cc.instantiate(s.prefabs.PlayBet);n.x=o.x,n.y=o.y,this.root.playBets.addChild(n);var r=n.getComponent("PlayBet");return r.init(),r.data.seat=t,r.data.row=e,n},e.prototype.getPlayBetCardsPosition=function(t){return t>=7&&(t=7),null===this.playBetCardsPosition&&(this.playBetCardsPosition=[[],[-50],[-50,50],[-50,0,50],[-50,-17,17,50],[-17,-9,-1,7,15],[-24,-16,-8,0,8,16],[-30,-22,-14,-6,2,10,18]]),this.playBetCardsPosition[t]},e.prototype.getPlayBetCardPosition=function(t,e){return this.getPlayBetCardsPosition(t)[e]},e.prototype.getPlayBet=function(t,e){var o=null;return this.root.playBets.children.forEach(function(n){var r=n.getComponent("PlayBet");r.data.seat===t&&r.data.row===e&&(o=n)}),o},e.prototype.effectOfShowFocus=function(t,e,o,n){var r=this;void 0===n&&(n=null);var i=this.root.focus;this.data.focus.seat=e,this.data.focus.row=o,t.call(function(){c.audio.playEffect(s.voice.focus);var t=r.getPlayBetPosition(e,o);i.x=t.x,i.y=t.y,i.scaleX=i.scaleY=0,i.active=!0,cc.tween(i).to(r.effectDuration.showFocus,{scaleX:1,scaleY:1},a.getEaseObject(a.Easing.backOut)).start()}),a.handleDelayCallback(t,a.DelayOption.SEAMLESS,this.effectDuration.showFocus,.075,n)},e.prototype.effectOfHideFocus=function(t,e){var o=this;void 0===e&&(e=null);var n=this.root.focus;t.call(function(){cc.tween(n).to(o.effectDuration.showFocus,{scaleX:0,scaleY:0},a.getEaseObject(a.Easing.backOut)).call(function(){n.active=!1}).start()}),a.handleDelayCallback(t,a.DelayOption.SEAMLESS_PLUS_CUSTOM,this.effectDuration.showFocus,.075,e)},e.prototype.effectOfMoveFocus=function(t,e,o,n){var r=this;void 0===n&&(n=null);var i=this.getPlayBetPosition(e,o);this.data.focus.seat=e,this.data.focus.row=o,t.call(function(){c.audio.playEffect(s.voice.focus),cc.tween(r.root.focus).to(r.effectDuration.moveFocus,{x:i.x,y:i.y},a.getEaseObject(a.Easing.backInOut)).start()}),a.handleDelayCallback(t,a.DelayOption.SEAMLESS,this.effectDuration.moveFocus,.075,n)},e.prototype.effectOfDealerSendCard=function(t,e,o,n){var r=this;void 0===n&&(n=null),t.call(function(){var t=r.table.root.sendCard,n=r.getPlayBet(e,o),i=n.getComponent("PlayBet").data.cards.length,l=r.getPlayBetCardsPosition(i+1),u=l[l.length-1],f=a.getXYUntilNode(t,r.table.node),p=a.getXYUntilNode(n,r.table.node);p.x+=u;var d=cc.instantiate(t);d.active=!0,d.x=f.x,d.y=f.y,r.table.addEffectNode(d),c.audio.playEffect(s.voice.sendCard),cc.tween(d).to(r.effectDuration.dealerSendCard,{x:p.x,y:p.y}).start()}),a.handleDelayCallback(t,a.DelayOption.SEAMLESS,this.effectDuration.dealerSendCard,0,n)},e.prototype.effectOfMovePlayBetLastCard=function(t,e,o,n){var r=this;void 0===n&&(n=null),t.call(function(){var t=r.getPlayBet(e.seat,e.row).getComponent("PlayBet"),n=r.getPlayBet(o.seat,o.row),i=n.getComponent("PlayBet"),s=t.getLastCard(),c=a.getXYUntilNode(s,r.table.node),l=a.getXYUntilNode(n,r.table.node);l.x+=i.getNextCardPosition();var u=cc.instantiate(s);u.x=c.x,u.y=c.y,u.eulerAngles=cc.v3(0,0,0),r.table.addEffectNode(u),t.getLastCard().destroy();var f=t.data.cards.pop();cc.tween(u).to(r.effectDuration.splitMoveCard,{x:l.x,y:l.y}).call(function(){i.addCard(f),r.table.clearEffectNodes()}).start()}),a.handleDelayCallback(t,a.DelayOption.SEAMLESS_PLUS_CUSTOM,this.effectDuration.splitMoveCard,.075,n)},e.prototype.createPlayerBetEffects=function(t,e,o,n){var r=this;this.data.rowCount[e]++;var a=this.addPlayBet(e,0).getComponent("PlayBet");a.setBet(n),a.effectOfShowBet(t),this.effectOfDealerSendCard(t,e,o,function(){a.addCard(52),r.table.clearEffectNodes()}),this.effectOfDealerSendCard(t,e,o,function(){a.addCard(52),r.table.clearEffectNodes()})},e.prototype.turnBasePlayerBetEffects=function(t,e,o,n){var r=this;e.forEach(function(e,a){var i=r.getPlayBet(a,0);if(null!==i){var s=i.getComponent("PlayBet");s.effectOfTurnFirstCard(t,e[0]),s.effectOfTurnLastCard(t,e[1]),s.effectOfShowPointAndStatus(t,o[a],n[a])}})},e.prototype.splitPlayerBetEffects=function(t,e,o,n,r,a){void 0===a&&(a=null),this.data.rowCount[o.seat]=o.row+1,this.table.getDealerScript().dealerLevel<o.row&&this.table.getDealerScript().effectOfCardsRaiseLevel(t);var i=this.addPlayBet(o.seat,o.row).getComponent("PlayBet");i.setBet(n,r),i.effectOfShowBet(t),this.effectOfMovePlayBetLastCard(t,e,o),this.getPlayBet(e.seat,e.row).getComponent("PlayBet").addCardEffects(t,e.fetchCard,{soft:e.soft,hard:e.hard,blackjack:e.blackjack},e.status),i.addCardEffects(t,o.fetchCard,{soft:o.soft,hard:o.hard,blackjack:o.blackjack},o.status)},e=r([u],e)}(cc.Component));o.default=f,cc._RF.pop()},{"./library/Audio":"Audio","./library/CocosUtils":"CocosUtils","./library/FreeBetSettingData":"FreeBetSettingData","./library/FreeBetUtils":"FreeBetUtils"}],Settings:[function(t,e,o){"use strict";cc._RF.push(e,"7b3b6LO0wdD8qOctx/0S3QD","Settings");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./library/CocosUtils"),i=t("./library/FreeBetUtils"),s=t("./library/FreeBetSettingData"),c=t("./library/Audio"),l=cc._decorator,u=l.ccclass,f=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasInit=!1,e}return n(e,t),e.prototype.init=function(){this.hasInit||(this.root=a.default.tree(this.node,{}),this.hasInit=!0)},e.prototype.onLoad=function(){this.init()},e.prototype.start=function(){},e.prototype.show=function(){c.audio.playEffect(s.voice.popup),this.updateSettingStatus();var t=this.root.bg;t.scaleX=t.scaleY=.1,cc.tween(t).to(.4,{scaleX:1,scaleY:1},i.getEaseObject(i.Easing.backOut)).start()},e.prototype.hide=function(){var t=this;c.audio.playEffect(s.voice.popdown);var e=this.root.bg;cc.tween(e).to(.4,{scaleX:.1,scaleY:.1},i.getEaseObject(i.Easing.backIn)).call(function(){t.node.parent.removeChild(t.node,!1)}).start()},e.prototype.onDoneClick=function(t){c.audio.playEffect(s.voice.clickButton);var e=t.target;this.root.bg.getNumberOfRunningActions()>0||e.getNumberOfRunningActions()>0||(i.flashNode(e),this.hide())},e.prototype.onMusicOnClick=function(){s.settings.music=!1,this.updateSettingStatus(),i.bigSmallNode(this.root.$bg.$music.off),c.audio.stopMusic()},e.prototype.onMusicOffClick=function(){s.settings.music=!0,this.updateSettingStatus(),i.bigSmallNode(this.root.$bg.$music.on),c.audio.playEffect(s.voice.clickButton),c.audio.playMusic(s.voice.bg)},e.prototype.onSoundOnClick=function(){s.settings.sound=!1,this.updateSettingStatus(),i.bigSmallNode(this.root.$bg.$sound.off)},e.prototype.onSoundOffClick=function(){s.settings.sound=!0,this.updateSettingStatus(),i.bigSmallNode(this.root.$bg.$sound.on),c.audio.playEffect(s.voice.clickButton)},e.prototype.onEnRulesClick=function(){c.audio.playEffect(s.voice.clickButton),window.open(s.ruleUrl.en)},e.prototype.onChsRulesClick=function(){c.audio.playEffect(s.voice.clickButton),window.open(s.ruleUrl.chs)},e.prototype.updateSettingStatus=function(){!0===s.settings.sound?(this.root.$bg.$sound.on.active=!0,this.root.$bg.$sound.off.active=!1):(this.root.$bg.$sound.on.active=!1,this.root.$bg.$sound.off.active=!0),!0===s.settings.music?(this.root.$bg.$music.on.active=!0,this.root.$bg.$music.off.active=!1):(this.root.$bg.$music.on.active=!1,this.root.$bg.$music.off.active=!0)},e=r([u],e)}(cc.Component));o.default=f,cc._RF.pop()},{"./library/Audio":"Audio","./library/CocosUtils":"CocosUtils","./library/FreeBetSettingData":"FreeBetSettingData","./library/FreeBetUtils":"FreeBetUtils"}],Tree:[function(t,e,o){"use strict";cc._RF.push(e,"c87f7jdXe5HKJjVrb2aDKFy","Tree"),cc._RF.pop()},{}]},{},["Balance","Bet","Buttons","CardsDetail","Dealer","FreeBetBJ","FreeBetEvent","FreeBetTable","Gaming","Loading","Message","Notice","PayTable","PlayBet","Player","Settings","I18N","Tree","Audio","CocosUtils","FreeBetSettingData","FreeBetText","FreeBetUtils"]);